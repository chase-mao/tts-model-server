(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1646:(e,t,r)=>{Promise.resolve().then(r.bind(r,9447))},9447:(e,t,r)=>{"use strict";r.d(t,{default:()=>h});var a=r(5155),n=r(2115),s=r(2651),l=r(7971);r(5362);var i=r(6462),o=r(8173),c=r.n(o);function d(){return(0,a.jsxs)(i.m,{children:[(0,a.jsx)("script",{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=G-F6K80FT3TZ"}),(0,a.jsx)("script",{children:"\n          window.dataLayer = window.dataLayer || [];\n          function gtag() {\n            window.dataLayer.push(arguments);\n          }\n          gtag('js', new Date());\n          gtag('config', 'G-F6K80FT3TZ');\n        "})]})}let h=()=>{let[e,t]=(0,n.useState)({}),[r,i]=(0,n.useState)([]),[o,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{s.A.get("/tts/api/fields").then(e=>{if(!e||200!==e.status||!e.data||e.data.error)throw"Error fetching the fields: "+e.data.error;e.data.fields&&i(e.data.fields.map(e=>({field:e,children:[]})))}).catch(e=>{alert("Error fetching the fields: "+e),console.error("There was an error fetching the fields!",e)})},[]);let u=(e,r)=>{t(t=>({...t,[e]:r}))},f=(e,t)=>(e.children.forEach(e=>{t=f(e,t)}),t.filter(t=>{let{field:r}=t;return r!==e.field})),m=(e,t)=>(e.children.forEach(e=>{t=f(e,t)}),t),p=(e,a)=>{u(e.field.name,a);let n=e.field.options.find(e=>e.value===a),s=null==n?void 0:n.relatedFields;i(t=>{let r=m(e,t),a=s?s.map(e=>({field:e,children:[]})):[];return e.children=a,[...r,...a]}),t(e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return r.some(e=>e.field.name===t)})))},g=()=>{let t=new window.AudioContext;h(!0),s.A.post("/tts/api/invoke",e,{headers:{"Content-Type":"application/json"},responseType:"arraybuffer"}).then(e=>{if(!e||e.headers.error||!e.data)throw"invoke tts api failed, err:"+e.headers.error;return e.data}).then(e=>t.decodeAudioData(e)).then(e=>{let r=t.createBufferSource();r.buffer=e,r.connect(t.destination),r.start(t.currentTime)}).catch(e=>{alert("Error: ".concat(e))}).finally(()=>{h(!1)})},x=()=>{let t=window.location.origin,r={...e};delete r.text,r.host=t;let a=new URLSearchParams(r).toString(),n="".concat(t,"/tts/api/subscribe?").concat(a);navigator.clipboard.writeText(n).then(()=>{alert("Subscription URL copied to clipboard!")}).catch(e=>{console.error("Failed to copy URL:",e)})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)("div",{className:"config-form",children:[(0,a.jsx)(l.A,{href:"https://github.com/chasemao/tts-model-server",children:"Star tts-model-server"}),(0,a.jsx)(c(),{className:"home-redirect",href:"/",children:"Back to Chase Mao's Blog"}),(0,a.jsx)("h2",{className:"form-title",children:"TTS Model Server WebUI"}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Token"}),(0,a.jsx)("input",{className:"form-input",onChange:e=>u("token",e.target.value)}),(0,a.jsx)("p",{className:"form-desc",children:"Input -token when running server, can be empty"})]}),(0,a.jsx)("div",{className:"fields-container",children:r.map(t=>{let{field:r}=t;return(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:r.name}),r.options&&0!==r.options.length?(0,a.jsx)("select",{className:"form-select",value:(()=>{if(e[r.name])return e[r.name];let a=r.defaultValue;return""===a&&(a=r.options[0].value),p(t,a),a})(),onChange:e=>p(t,e.target.value),children:r.options.map(e=>{let{value:t}=e;return(0,a.jsx)("option",{value:t,children:t},t)})}):(0,a.jsx)("input",{className:"form-input",defaultValue:r.defaultValue,onChange:e=>u(r.name,e.target.value)})]},r.name)})}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Test Text"}),(0,a.jsx)("input",{className:"form-input",value:(()=>{if(e.text)return e.text;let t="It is a paragraph for testing, thank you for starring the github repo.";return e.text=t,t})(),onChange:e=>u("text",e.target.value)}),(0,a.jsx)("p",{className:"form-desc",children:"Text for testing"})]}),(0,a.jsx)("button",{className:"form-button",onClick:()=>g(),disabled:o,children:"Listen"}),(0,a.jsx)("button",{className:"form-button",onClick:()=>x(),children:"Generate subscribe URL"})]})]})}},5362:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[659,626,441,517,358],()=>t(1646)),_N_E=e.O()}]);